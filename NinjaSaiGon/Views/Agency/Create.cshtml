@model Agency

@{
    ViewData["Title"] = "Create";
    var cultureInfo = new CultureInfo("vi-VN");
    cultureInfo.NumberFormat.NumberDecimalSeparator = ".";
    CultureInfo.DefaultThreadCurrentCulture = cultureInfo;
    CultureInfo.DefaultThreadCurrentUICulture = cultureInfo;
    IEnumerable<DistrictPlace> districts = ViewBag.DistrictPlaces;
}

<div class="m-grid__item m-grid__item--fluid m-wrapper">
    <div class="m-content">
        <div class="m-portlet m-portlet--mobile">
            <div class="m-portlet__head">
                <div class="m-portlet__head-caption">
                    <div class="m-portlet__head-title">
                        <h3 class="m-portlet__head-text">
                            Thêm đại lý
                        </h3>
                    </div>
                </div>
            </div>
            <div class="m-portlet__body">
                <form asp-action="Create" class="m-form m-form--label-align-right">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <div class="m-portlet__body">
                        <div class="m-portlet m-portlet--tab">
                            <div class="m-portlet__head">
                                <div class="m-portlet__head-caption">
                                    <div class="m-portlet__head-title">
                                        <span class="m-portlet__head-icon m--hide">
                                            <i class="la la-gear"></i>
                                        </span>
                                        <h3 class="m-portlet__head-text">
                                            Phân loại
                                        </h3>
                                    </div>
                                </div>
                            </div>
                            <div class="m-portlet__body">
                                <div class="form-group m-form__group row">
                                    <label class="col-lg-2 col-form-label">
                                        Loại đại lý
                                    </label>
                                    <div class="col-lg-3">
                                        <select asp-for="AgencyType" class="form-control m-input m-input--square">
                                            <option value="0">Cá nhân</option>
                                            <option value="1" selected>Tổ chức</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="m-portlet m-portlet--tab">
                            <div class="m-portlet__head">
                                <div class="m-portlet__head-caption">
                                    <div class="m-portlet__head-title">
                                        <span class="m-portlet__head-icon m--hide">
                                            <i class="la la-gear"></i>
                                        </span>
                                        <h3 class="m-portlet__head-text">
                                            Thông tin chung
                                        </h3>
                                    </div>
                                </div>
                            </div>
                            <div class="m-portlet__body">
                                <div class="form-group m-form__group row">
                                    <div class="col-md-6">
                                        <div class="form-group m-form__group row">
                                            <label class="col-lg-3 col-form-label">
                                                Tên đại lý
                                            </label>
                                            <div class="col-lg-4">
                                                <input asp-for="Name" class="form-control m-input" autocomplete="off" />
                                                <span asp-validation-for="Name" class="form-control-feedback"></span>
                                            </div>
                                        </div>
                                        <div class="form-group m-form__group row">
                                            <label class="col-lg-3 col-form-label">
                                                Tên giao dịch
                                            </label>
                                            <div class="col-lg-4">
                                                <input asp-for="TradingName" class="form-control m-input" autocomplete="off" />
                                                <span asp-validation-for="TradingName" class="form-control-feedback"></span>
                                            </div>
                                        </div>
                                        <div class="form-group m-form__group row nationality-item">
                                            <label class="col-lg-3 col-form-label">
                                                Nhóm đối tác
                                            </label>
                                            <div class="col-lg-4">
                                                <select asp-for="AgencyGroupId" asp-items="@(new SelectList(ViewBag.AgencyGroups, "Id", "Value"))" class="form-control m-input m-input--square">
                                                    <option value="" selected>Chọn</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group m-form__group row">
                                            <label class="col-lg-3 col-form-label">
                                                Mã số thuế
                                            </label>
                                            <div class="col-lg-4">
                                                <input asp-for="TaxCode" class="form-control m-input" autocomplete="off" />
                                                <span asp-validation-for="TaxCode" class="form-control-feedback"></span>
                                            </div>
                                        </div>
                                        <div class="form-group m-form__group row">
                                            <label class="col-lg-3 col-form-label">
                                                Số ĐKKD
                                            </label>
                                            <div class="col-lg-4">
                                                <input asp-for="BusinessRegNumber" class="form-control m-input" autocomplete="off" />
                                                <span asp-validation-for="BusinessRegNumber" class="form-control-feedback"></span>
                                            </div>
                                        </div>
                                        <div class="form-group m-form__group row">
                                            <label class="col-lg-3 col-form-label">
                                                Ngày thành lập
                                            </label>
                                            <div class="col-lg-4">
                                                <input type="text" asp-for="StartDate" class="form-control m-input datepicker" autocomplete="off" />
                                                <span asp-validation-for="StartDate" class="form-control-feedback"></span>
                                            </div>
                                        </div>
                                        <div class="form-group m-form__group row">
                                            <label class="col-lg-3 col-form-label">
                                                Ngành nghề kinh doanh
                                            </label>
                                            <div class="col-lg-4">
                                                <select asp-for="AgencyBusinessId" asp-items="@(new SelectList(ViewBag.AgencyBusinesses, "Id", "Value"))" class="form-control m-input m-input--square"></select>
                                                <span asp-validation-for="AgencyBusinessId" class="form-control-feedback"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="m-portlet m-portlet--tab">
                            <div class="m-portlet__head">
                                <div class="m-portlet__head-caption">
                                    <div class="m-portlet__head-title">
                                        <span class="m-portlet__head-icon m--hide">
                                            <i class="la la-gear"></i>
                                        </span>
                                        <h3 class="m-portlet__head-text">
                                            Thông tin liên hệ
                                        </h3>
                                    </div>
                                </div>
                            </div>
                            <div class="m-portlet__body">
                                <div id="phone-container">
                                    <div class="form-group m-form__group row phone-item">
                                        <input type="hidden" class="IsDeletedPhone" name="AgencyContactInfo.Phones[0].IsDeleted" value="false">
                                        <label class="col-lg-2 col-form-label">
                                            Số điện thoại
                                        </label>
                                        <div class="col-lg-3">
                                            <select name="AgencyContactInfo.Phones[0].TypeId" asp-items="@(new SelectList(ViewBag.PhoneTypes, "Id", "Value"))" class="form-control m-input m-input--square"></select>
                                        </div>
                                        <div class="col-lg-3">
                                            <input name="AgencyContactInfo.Phones[0].PhoneNumber" class="form-control m-input" autocomplete="off" />
                                        </div>
                                        <div class="col-lg-2">
                                            <label class="m-checkbox m-checkbox--focus">
                                                <input type="checkbox" name="AgencyContactInfo.Phones[0].IsPrimary" value="true" />
                                                SĐT chính
                                                <span></span>
                                            </label>
                                        </div>
                                        <div class="col-lg-2">
                                            <button type="button" class="btn btn-secondary btn-sm" id="add-phone" data-index="1">Thêm SĐT</button>
                                        </div>
                                    </div>
                                    <div hidden id="addPhoneTemplate">
                                        <div class="form-group m-form__group row phone-item" data-index="{pIndex}">
                                            <label class="col-lg-2 col-form-label">&nbsp;</label>
                                            <div class="col-lg-3">
                                                <select name="AgencyContactInfo.Phones[{pIndex}].TypeId" asp-items="@(new SelectList(ViewBag.PhoneTypes, "Id", "Value"))" class="form-control m-input m-input--square"></select>
                                            </div>
                                            <div class="col-lg-3">
                                                <input name="AgencyContactInfo.Phones[{pIndex}].PhoneNumber" class="form-control m-input" autocomplete="off" />
                                            </div>
                                            <div class="col-lg-2">
                                                <label class="m-checkbox m-checkbox--focus">
                                                    <input type="checkbox" name="AgencyContactInfo.Phones[{pIndex}].IsPrimary" value="true" />
                                                    SĐT chính
                                                    <span></span>
                                                </label>
                                            </div>
                                            <div class="col-lg-2">
                                                <input type="hidden" class="IsDeletedPhone" name="AgencyContactInfo.Phones[{pIndex}].IsDeleted" value="false">
                                                <a class="m-portlet__nav-link btn m-btn m-btn--hover-danger m-btn--icon m-btn--icon-only m-btn--pill btn-deletePhone" data-index="{pIndex}">
                                                    <i class="la la-trash"></i>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div id="email-container">
                                    <div class="form-group m-form__group row email-item mt-4">
                                        <input type="hidden" class="IsDeletedEmail" name="AgencyContactInfo.Emails[0].IsDeleted" value="false">
                                        <label class="col-lg-2 col-form-label">
                                            Email
                                        </label>
                                        <div class="col-lg-3">
                                            <select name="AgencyContactInfo.Emails[0].TypeId" asp-items="@(new SelectList(ViewBag.EmailTypes, "Id", "Value"))" class="form-control m-input m-input--square"></select>
                                        </div>
                                        <div class="col-lg-3">
                                            <input name="AgencyContactInfo.Emails[0].Email" class="form-control m-input" autocomplete="off" />
                                        </div>
                                        <div class="col-lg-2">
                                            <label class="m-checkbox m-checkbox--focus">
                                                <input type="checkbox" name="AgencyContactInfo.Emails[0].IsPrimary" value="true" />
                                                Email chính
                                                <span></span>
                                            </label>
                                        </div>
                                        <div class="col-lg-2">
                                            <button type="button" class="btn btn-secondary btn-sm" id="add-email" data-index="1">Thêm Email</button>
                                        </div>
                                    </div>
                                    <div hidden id="addEmailTemplate">
                                        <div class="form-group m-form__group row email-item" data-index="{pIndex}">
                                            <label class="col-lg-2 col-form-label">&nbsp;</label>
                                            <div class="col-lg-3">
                                                <select name="AgencyContactInfo.Emails[{pIndex}].TypeId" asp-items="@(new SelectList(ViewBag.EmailTypes, "Id", "Value"))" class="form-control m-input m-input--square"></select>
                                            </div>
                                            <div class="col-lg-3">
                                                <input name="AgencyContactInfo.Emails[{pIndex}].Email" class="form-control m-input" autocomplete="off" />
                                            </div>
                                            <div class="col-lg-2">
                                                <label class="m-checkbox m-checkbox--focus">
                                                    <input type="checkbox" name="AgencyContactInfo.Emails[{pIndex}].IsPrimary" value="true" />
                                                    Email chính
                                                    <span></span>
                                                </label>
                                            </div>
                                            <div class="col-lg-2">
                                                <input type="hidden" class="IsDeletedEmail" name="AgencyContactInfo.Emails[{pIndex}].IsDeleted" value="false">
                                                <a class="m-portlet__nav-link btn m-btn m-btn--hover-danger m-btn--icon m-btn--icon-only m-btn--pill btn-deleteEmail" data-index="{pIndex}">
                                                    <i class="la la-trash"></i>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div id="address-container">
                                    <div class="form-group m-form__group row mt-4">
                                        <div class="col-lg-2 text-right">
                                            <label class="col-form-label">
                                                Địa chỉ
                                            </label>
                                        </div>
                                        <div class="col-lg-8">
                                            <div class="form-group m-form__group row address-item">
                                                <input type="hidden" class="IsDeletedAddress" name="AgencyContactInfo.Addresses[0].IsDeleted" value="false">
                                                <div class="col-lg-3">
                                                    <select name="AgencyContactInfo.Addresses[0].TypeId" asp-items="@(new SelectList(ViewBag.AddressTypes, "Id", "Value"))" class="form-control m-input m-input--square">
                                                        <option value="" selected>Chọn loại địa chỉ</option>
                                                    </select>
                                                </div>
                                                <div class="col-lg-6">
                                                    <input name="AgencyContactInfo.Addresses[0].MoreInfo" class="form-control m-input" placeholder="Địa chỉ" autocomplete="off" />
                                                </div>
                                                <div class="col-lg-3">
                                                    <select name="AgencyContactInfo.Addresses[0].WardId" class="form-control m-input m-input--square contact-ward" data-index="0">
                                                        <option value="" selected>Chọn phường</option>
                                                    </select>
                                                </div>
                                                <div class="col-lg-3">
                                                    <select name="AgencyContactInfo.Addresses[0].DistrictPlaceId" class="form-control m-input m-input--square contact-district" data-index="0">
                                                        <option value="" selected>Chọn quận</option>
                                                        @foreach (var district in districts)
                                                        {
                                                            <option value="@district.Id" data-parent="@district.ProvinceId">@district.Name</option>
                                                        }
                                                    </select>
                                                </div>
                                                <div class="col-lg-3">
                                                    <select name="AgencyContactInfo.Addresses[0].ProvinceId" asp-items="@(new SelectList(ViewBag.Provinces, "Id", "Name"))" class="form-control m-input m-input--square contact-province" data-index="0">
                                                        <option value="" selected>Chọn tỉnh/thành</option>
                                                    </select>
                                                </div>
                                                <div class="col-lg-3">
                                                    <select name="AgencyContactInfo.Addresses[0].NationalityId" asp-items="@(new SelectList(ViewBag.Nationalities, "Id", "Value"))" class="form-control m-input m-input--square contact-national" data-index="0">
                                                        <option value="" selected>Chọn quốc gia</option>
                                                    </select>
                                                </div>
                                                <div class="col-lg-2">
                                                    <label class="m-checkbox m-checkbox--focus">
                                                        <input type="checkbox" name="AgencyContactInfo.Addresses[0].IsPrimary" value="true" />
                                                        Địa chỉ chính
                                                        <span></span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-2">
                                            <button type="button" class="btn btn-secondary btn-sm" id="add-address" data-index="1">Thêm địa chỉ</button>
                                        </div>
                                    </div>
                                    <div hidden id="addAddressTemplate">
                                        <div class="form-group m-form__group row address-item" data-index="{pIndex}">
                                            <div class="col-lg-2 text-right">
                                                <label class="col-form-label">&nbsp;</label>
                                            </div>
                                            <div class="col-lg-8">
                                                <div class="form-group m-form__group row">
                                                    <div class="col-lg-3">
                                                        <select name="AgencyContactInfo.Addresses[{pIndex}].TypeId" asp-items="@(new SelectList(ViewBag.AddressTypes, "Id", "Value"))" class="form-control m-input m-input--square">
                                                            <option value="" selected>Chọn loại địa chỉ</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-lg-6">
                                                        <input name="AgencyContactInfo.Addresses[{pIndex}].MoreInfo" class="form-control m-input" placeholder="Địa chỉ" autocomplete="off" />
                                                    </div>
                                                    <div class="col-lg-3">
                                                        <select name="AgencyContactInfo.Addresses[{pIndex}].WardId" class="form-control m-input m-input--square contact-ward" data-index="{pIndex}">
                                                            <option value="" selected>Chọn phường</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-lg-3">
                                                        <select name="AgencyContactInfo.Addresses[{pIndex}].DistrictPlaceId" class="form-control m-input m-input--square contact-district" data-index="{pIndex}">
                                                            <option value="" selected>Chọn quận</option>
                                                            @foreach (var district in districts)
                                                            {
                                                                <option value="@district.Id" data-parent="@district.ProvinceId">@district.Name</option>
                                                            }
                                                        </select>
                                                    </div>
                                                    <div class="col-lg-3">
                                                        <select name="AgencyContactInfo.Addresses[{pIndex}].ProvinceId" asp-items="@(new SelectList(ViewBag.Provinces, "Id", "Name"))" class="form-control m-input m-input--square contact-province" data-index="{pIndex}">
                                                            <option value="" selected>Chọn tỉnh/thành</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-lg-3">
                                                        <select name="AgencyContactInfo.Addresses[{pIndex}].NationalityId" asp-items="@(new SelectList(ViewBag.Nationalities, "Id", "Value"))" class="form-control m-input m-input--square contact-national" data-index="{pIndex}">
                                                            <option value="" selected>Chọn quốc gia</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-lg-2">
                                                        <label class="m-checkbox m-checkbox--focus">
                                                            <input type="checkbox" name="AgencyContactInfo.Addresses[{pIndex}].IsPrimary" value="true" />
                                                            Địa chỉ chính
                                                            <span></span>
                                                        </label>
                                                    </div>
                                                    <div class="col-lg-1 text-right">
                                                        <input type="hidden" class="IsDeletedAddress" name="AgencyContactInfo.Addresses[{pIndex}].IsDeleted" value="false">
                                                        <a class="m-portlet__nav-link btn m-btn m-btn--hover-danger m-btn--icon m-btn--icon-only m-btn--pill btn-deleteAddress" data-index="{pIndex}">
                                                            <i class="la la-trash"></i>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div id="social-container">
                                    <div class="form-group m-form__group row social-item mt-4">
                                        <input type="hidden" class="IsDeletedSocial" name="AgencyContactInfo.Socials[0].IsDeleted" value="false">
                                        <label class="col-lg-2 col-form-label">
                                            Mạng xã hội
                                        </label>
                                        <div class="col-lg-3">
                                            <select name="AgencyContactInfo.Socials[0].TypeId" asp-items="@(new SelectList(ViewBag.SocialTypes, "Id", "Value"))" class="form-control m-input m-input--square"></select>
                                        </div>
                                        <div class="col-lg-3">
                                            <input name="AgencyContactInfo.Socials[0].Account" class="form-control m-input" autocomplete="off" />
                                        </div>
                                        <div class="col-lg-2">
                                            <label class="m-checkbox m-checkbox--focus">
                                                <input type="checkbox" name="AgencyContactInfo.Socials[0].IsPrimary" value="true" />
                                                MXH chính
                                                <span></span>
                                            </label>
                                        </div>
                                        <div class="col-lg-2">
                                            <button type="button" class="btn btn-secondary btn-sm" id="add-social" data-index="1">Thêm MXH</button>
                                        </div>
                                    </div>
                                    <div hidden id="addSocialTemplate">
                                        <div class="form-group m-form__group row social-item" data-index="{pIndex}">
                                            <label class="col-lg-2 col-form-label">&nbsp;</label>
                                            <div class="col-lg-3">
                                                <select name="AgencyContactInfo.Socials[{pIndex}].TypeId" asp-items="@(new SelectList(ViewBag.SocialTypes, "Id", "Value"))" class="form-control m-input m-input--square"></select>
                                            </div>
                                            <div class="col-lg-3">
                                                <input name="AgencyContactInfo.Socials[{pIndex}].Account" class="form-control m-input" autocomplete="off" />
                                            </div>
                                            <div class="col-lg-2">
                                                <label class="m-checkbox m-checkbox--focus">
                                                    <input type="checkbox" name="AgencyContactInfo.Socials[{pIndex}].IsPrimary" value="true" />
                                                    MXH chính
                                                    <span></span>
                                                </label>
                                            </div>
                                            <div class="col-lg-2">
                                                <input type="hidden" class="IsDeletedSocial" name="AgencyContactInfo.Socials[{pIndex}].IsDeleted" value="false">
                                                <a class="m-portlet__nav-link btn m-btn m-btn--hover-danger m-btn--icon m-btn--icon-only m-btn--pill btn-deleteSocial" data-index="{pIndex}">
                                                    <i class="la la-trash"></i>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div id="ott-container">
                                    <div class="form-group m-form__group row ott-item mt-4">
                                        <input type="hidden" class="IsDeletedOTT" name="AgencyContactInfo.OTTs[0].IsDeleted" value="false">
                                        <label class="col-lg-2 col-form-label">
                                            OTT
                                        </label>
                                        <div class="col-lg-3">
                                            <select name="AgencyContactInfo.OTTs[0].TypeId" asp-items="@(new SelectList(ViewBag.OTTTypes, "Id", "Value"))" class="form-control m-input m-input--square"></select>
                                        </div>
                                        <div class="col-lg-3">
                                            <input name="AgencyContactInfo.OTTs[0].Account" class="form-control m-input" autocomplete="off" />
                                        </div>
                                        <div class="col-lg-2">
                                            <label class="m-checkbox m-checkbox--focus">
                                                <input type="checkbox" name="AgencyContactInfo.OTTs[0].IsPrimary" value="true" />
                                                OTT chính
                                                <span></span>
                                            </label>
                                        </div>
                                        <div class="col-lg-2">
                                            <button type="button" class="btn btn-secondary btn-sm" id="add-ott" data-index="1">Thêm OTT</button>
                                        </div>
                                    </div>
                                    <div hidden id="addOTTTemplate">
                                        <div class="form-group m-form__group row ott-item" data-index="{pIndex}">
                                            <label class="col-lg-2 col-form-label">&nbsp;</label>
                                            <div class="col-lg-3">
                                                <select name="AgencyContactInfo.OTTs[{pIndex}].TypeId" asp-items="@(new SelectList(ViewBag.OTTTypes, "Id", "Value"))" class="form-control m-input m-input--square"></select>
                                            </div>
                                            <div class="col-lg-3">
                                                <input name="AgencyContactInfo.OTTs[{pIndex}].Account" class="form-control m-input" autocomplete="off" />
                                            </div>
                                            <div class="col-lg-2">
                                                <label class="m-checkbox m-checkbox--focus">
                                                    <input type="checkbox" name="AgencyContactInfo.OTTs[{pIndex}].IsPrimary" value="true" />
                                                    OTT chính
                                                    <span></span>
                                                </label>
                                            </div>
                                            <div class="col-lg-2">
                                                <input type="hidden" class="IsDeletedOTT" name="AgencyContactInfo.OTTs[{pIndex}].IsDeleted" value="false">
                                                <a class="m-portlet__nav-link btn m-btn m-btn--hover-danger m-btn--icon m-btn--icon-only m-btn--pill btn-deleteOTT" data-index="{pIndex}">
                                                    <i class="la la-trash"></i>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="m-portlet m-portlet--tab">
                            <div class="m-portlet__head">
                                <div class="m-portlet__head-caption">
                                    <div class="m-portlet__head-title">
                                        <span class="m-portlet__head-icon m--hide">
                                            <i class="la la-gear"></i>
                                        </span>
                                        <h3 class="m-portlet__head-text">
                                            Danh sách người đại diện
                                        </h3>
                                    </div>
                                </div>
                            </div>
                            <div class="m-portlet__body">
                                <div class="form-group m-form__group row">
                                    <div class="col-lg-12 text-right">
                                        <button type="button" class="btn btn-secondary btn-sm" id="add-arepresentative" data-index="0">Thêm người đại diện</button>
                                    </div>
                                </div>
                                <div class="form-group m-form__group row">
                                    <div class="col-lg-12">
                                        <table class="table table-striped- table-bordered table-hover table-checkable">
                                            <thead>
                                                <tr class="text-center">
                                                    <th>Họ tên</th>
                                                    <th>Người liên hệ chính</th>
                                                    <th>Chức vụ</th>
                                                    <th>Điện thoại</th>
                                                    <th>Email</th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <tbody id="arepresentative-history"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="m-portlet m-portlet--tab">
                            <div class="m-portlet__head">
                                <div class="m-portlet__head-caption">
                                    <div class="m-portlet__head-title">
                                        <span class="m-portlet__head-icon m--hide">
                                            <i class="la la-gear"></i>
                                        </span>
                                        <h3 class="m-portlet__head-text">
                                            Tài khoản - Ngân hàng
                                        </h3>
                                    </div>
                                </div>
                            </div>
                            <div class="m-portlet__body">
                                <div id="bank-container">
                                    <div class="form-group m-form__group row">
                                        <div class="col-lg-12">
                                            <div class="form-group m-form__group row bank-item">
                                                <input type="hidden" class="IsDeletedBank" name="AgencyBanks[0].IsDeleted" value="false">
                                                <div class="col-lg-12">
                                                    <div class="form-group m-form__group row">
                                                        <div class="col-md-6">
                                                            <div class="form-group m-form__group row">
                                                                <label class="col-lg-3 col-form-label">
                                                                    Số tài khoản
                                                                </label>
                                                                <div class="col-lg-4">
                                                                    <input name="AgencyBanks[0].AccountNumber" class="form-control m-input" autocomplete="off" />
                                                                </div>
                                                            </div>
                                                            <div class="form-group m-form__group row">
                                                                <label class="col-lg-3 col-form-label">
                                                                    Tên tài khoản
                                                                </label>
                                                                <div class="col-lg-9">
                                                                    <input name="AgencyBanks[0].AccountName" class="form-control m-input" autocomplete="off" />
                                                                </div>
                                                            </div>
                                                            <div class="form-group m-form__group row">
                                                                <label class="col-lg-3 col-form-label">
                                                                    Loại tài khoản
                                                                </label>
                                                                <div class="col-lg-4">
                                                                    <select name="AgencyBanks[0].BankAccountTypeId" asp-items="@(new SelectList(ViewBag.BankAccountTypes, "Id", "Value"))" class="form-control m-input m-input--square">
                                                                        <option value="" selected>Chọn</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="form-group m-form__group row">
                                                                <label class="col-lg-3 col-form-label">
                                                                    Ngân hàng
                                                                </label>
                                                                <div class="col-lg-4">
                                                                    <input name="AgencyBanks[0].BankName" class="form-control m-input" autocomplete="off" />
                                                                </div>
                                                            </div>
                                                            <div class="form-group m-form__group row">
                                                                <label class="col-lg-3 col-form-label">
                                                                    Swift Code
                                                                </label>
                                                                <div class="col-lg-4">
                                                                    <input name="AgencyBanks[0].SwiftCode" class="form-control m-input" autocomplete="off" />
                                                                </div>
                                                            </div>
                                                            <div class="form-group m-form__group row">
                                                                <label class="col-lg-3 col-form-label">
                                                                    Chi nhánh
                                                                </label>
                                                                <div class="col-lg-4">
                                                                    <input name="AgencyBanks[0].BankBranch" class="form-control m-input" autocomplete="off" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group m-form__group row">
                                                        <div class="col-lg-12">
                                                            <div class="form-group m-form__group row">
                                                                <div class="col-lg-12" id="card-container-0">
                                                                    <div class="form-group m-form__group row card-item">
                                                                        <input type="hidden" class="IsDeletedCard" name="AgencyBanks[0].AgencyBankCards[0].IsDeleted" value="false">
                                                                        <div class="col-lg-6">
                                                                            <div class="form-group m-form__group row">
                                                                                <label class="col-lg-3 col-form-label">
                                                                                    Loại thẻ thanh toán
                                                                                </label>
                                                                                <div class="col-lg-4">
                                                                                    <select name="AgencyBanks[0].AgencyBankCards[0].BankCardTypeId" asp-items="@(new SelectList(ViewBag.BankCardTypes, "Id", "Value"))" class="form-control m-input m-input--square">
                                                                                        <option value="" selected>Chọn</option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group m-form__group row">
                                                                                <label class="col-lg-3 col-form-label">
                                                                                    Số thẻ thanh toán
                                                                                </label>
                                                                                <div class="col-lg-4">
                                                                                    <input name="AgencyBanks[0].AgencyBankCards[0].CardNumber" class="form-control m-input" autocomplete="off" />
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-6">
                                                                            <div class="form-group m-form__group row">
                                                                                <label class="col-lg-3 col-form-label">&nbsp;</label>
                                                                                <div class="col-lg-9">&nbsp;</div>
                                                                            </div>
                                                                            <div class="form-group m-form__group row">
                                                                                <label class="col-lg-3 col-form-label">
                                                                                    Ngày hết hạn thẻ
                                                                                </label>
                                                                                <div class="col-lg-4">
                                                                                    <input name="AgencyBanks[0].AgencyBankCards[0].ExpiredDate" class="form-control m-input" autocomplete="off" />
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group m-form__group row">
                                                                <div class="col-lg-12 text-right">
                                                                    <button type="button" class="btn btn-secondary btn-sm add-card" data-parent="0" data-index="1">Thêm thẻ thanh toán</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div hidden id="addBankTemplate">
                                    <div class="form-group m-form__group row pt-4 bank-item" data-index="{pIndex}">
                                        <div class="col-lg-12">
                                            <div class="form-group m-form__group row">
                                                <div class="col-lg-12">
                                                    <div class="form-group m-form__group row">
                                                        <div class="col-md-6">
                                                            <div class="form-group m-form__group row">
                                                                <label class="col-lg-3 col-form-label">
                                                                    Số tài khoản
                                                                </label>
                                                                <div class="col-lg-4">
                                                                    <input name="AgencyBanks[{pIndex}].AccountNumber" class="form-control m-input" autocomplete="off" />
                                                                </div>
                                                            </div>
                                                            <div class="form-group m-form__group row">
                                                                <label class="col-lg-3 col-form-label">
                                                                    Tên tài khoản
                                                                </label>
                                                                <div class="col-lg-9">
                                                                    <input name="AgencyBanks[{pIndex}].AccountName" class="form-control m-input" autocomplete="off" />
                                                                </div>
                                                            </div>
                                                            <div class="form-group m-form__group row">
                                                                <label class="col-lg-3 col-form-label">
                                                                    Loại tài khoản
                                                                </label>
                                                                <div class="col-lg-4">
                                                                    <select name="AgencyBanks[{pIndex}].BankAccountTypeId" asp-items="@(new SelectList(ViewBag.BankAccountTypes, "Id", "Value"))" class="form-control m-input m-input--square">
                                                                        <option value="" selected>Chọn</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="form-group m-form__group row">
                                                                <label class="col-lg-3 col-form-label">
                                                                    Ngân hàng
                                                                </label>
                                                                <div class="col-lg-4">
                                                                    <input name="AgencyBanks[{pIndex}].BankName" class="form-control m-input" autocomplete="off" />
                                                                </div>
                                                                <div class="col-lg-5">
                                                                    <input type="hidden" class="IsDeletedBank" name="AgencyBanks[{pIndex}].IsDeleted" value="false">
                                                                    <a class="m-portlet__nav-link btn m-btn m-btn--hover-danger m-btn--icon m-btn--icon-only m-btn--pill btn-deleteBank" data-index="{pIndex}">
                                                                        <i class="la la-trash"></i>
                                                                    </a>
                                                                </div>
                                                            </div>
                                                            <div class="form-group m-form__group row">
                                                                <label class="col-lg-3 col-form-label">
                                                                    Swift Code
                                                                </label>
                                                                <div class="col-lg-4">
                                                                    <input name="AgencyBanks[{pIndex}].SwiftCode" class="form-control m-input" autocomplete="off" />
                                                                </div>
                                                            </div>
                                                            <div class="form-group m-form__group row">
                                                                <label class="col-lg-3 col-form-label">
                                                                    Chi nhánh
                                                                </label>
                                                                <div class="col-lg-4">
                                                                    <input name="AgencyBanks[{pIndex}].BankBranch" class="form-control m-input" autocomplete="off" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group m-form__group row">
                                                        <div class="col-lg-12">
                                                            <div class="form-group m-form__group row">
                                                                <div class="col-lg-12" id="card-container-{pIndex}">
                                                                    <div class="form-group m-form__group row card-item">
                                                                        <input type="hidden" class="IsDeletedCard" name="AgencyBanks[{pIndex}].AgencyBankCards[0].IsDeleted" value="false">
                                                                        <div class="col-lg-6">
                                                                            <div class="form-group m-form__group row">
                                                                                <label class="col-lg-3 col-form-label">
                                                                                    Loại thẻ thanh toán
                                                                                </label>
                                                                                <div class="col-lg-4">
                                                                                    <select name="AgencyBanks[{pIndex}].AgencyBankCards[0].BankCardTypeId" asp-items="@(new SelectList(ViewBag.BankCardTypes, "Id", "Value"))" class="form-control m-input m-input--square">
                                                                                        <option value="" selected>Chọn</option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="form-group m-form__group row">
                                                                                <label class="col-lg-3 col-form-label">
                                                                                    Số thẻ thanh toán
                                                                                </label>
                                                                                <div class="col-lg-4">
                                                                                    <input name="AgencyBanks[{pIndex}].AgencyBankCards[0].CardNumber" class="form-control m-input" autocomplete="off" />
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-6">
                                                                            <div class="form-group m-form__group row">
                                                                                <label class="col-lg-3 col-form-label">&nbsp;</label>
                                                                                <div class="col-lg-9">&nbsp;</div>
                                                                            </div>
                                                                            <div class="form-group m-form__group row">
                                                                                <label class="col-lg-3 col-form-label">
                                                                                    Ngày hết hạn thẻ
                                                                                </label>
                                                                                <div class="col-lg-4">
                                                                                    <input name="AgencyBanks[{pIndex}].AgencyBankCards[0].ExpiredDate" class="form-control m-input" autocomplete="off" />
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group m-form__group row">
                                                                <div class="col-lg-12 text-right">
                                                                    <button type="button" class="btn btn-secondary btn-sm add-card" data-parent="{pIndex}" data-index="1">Thêm thẻ thanh toán</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div hidden id="addCardTemplate">
                                    <div class="form-group m-form__group row card-item" data-parent="{bIndex}" data-index="{pIndex}">
                                        <div class="col-lg-6">
                                            <div class="form-group m-form__group row">
                                                <label class="col-lg-3 col-form-label">
                                                    Loại thẻ thanh toán
                                                </label>
                                                <div class="col-lg-4">
                                                    <select name="AgencyBanks[{bIndex}].AgencyBankCards[{pIndex}].BankCardTypeId" asp-items="@(new SelectList(ViewBag.BankCardTypes, "Id", "Value"))" class="form-control m-input m-input--square"></select>
                                                </div>
                                            </div>
                                            <div class="form-group m-form__group row">
                                                <label class="col-lg-3 col-form-label">
                                                    Số thẻ thanh toán
                                                </label>
                                                <div class="col-lg-4">
                                                    <input name="AgencyBanks[{bIndex}].AgencyBankCards[{pIndex}].CardNumber" class="form-control m-input" autocomplete="off" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="form-group m-form__group row">
                                                <label class="col-lg-3 col-form-label">&nbsp;</label>
                                                <div class="col-lg-9">&nbsp;</div>
                                            </div>
                                            <div class="form-group m-form__group row">
                                                <label class="col-lg-3 col-form-label">
                                                    Ngày hết hạn thẻ
                                                </label>
                                                <div class="col-lg-4">
                                                    <input name="AgencyBanks[{bIndex}].AgencyBankCards[{pIndex}].ExpiredDate" class="form-control m-input" autocomplete="off" />
                                                </div>
                                                <div class="col-lg-5">
                                                    <input type="hidden" class="IsDeletedCard" name="AgencyBanks[{bIndex}].AgencyBankCards[{pIndex}].IsDeleted" value="false">
                                                    <a class="m-portlet__nav-link btn m-btn m-btn--hover-danger m-btn--icon m-btn--icon-only m-btn--pill btn-deleteCard" data-parent="{bIndex}" data-index="{pIndex}">
                                                        <i class="la la-trash"></i>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group m-form__group row">
                                    <div class="col-lg-12 text-right">
                                        <button type="button" class="btn btn-secondary btn-sm" id="add-bank" data-index="1">Thêm tài khoản ngân hàng</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="m-portlet m-portlet--tab">
                            <div class="m-portlet__head">
                                <div class="m-portlet__head-caption">
                                    <div class="m-portlet__head-title">
                                        <span class="m-portlet__head-icon m--hide">
                                            <i class="la la-gear"></i>
                                        </span>
                                        <h3 class="m-portlet__head-text">
                                            Thanh toán
                                        </h3>
                                    </div>
                                </div>
                            </div>
                            <div class="m-portlet__body">
                                <div class="form-group m-form__group row">
                                    <div class="col-lg-12">
                                        <div class="form-group m-form__group row">
                                            <label class="col-lg-3 col-form-label">
                                                Hình thức thanh toán
                                            </label>
                                            <div class="col-lg-3">
                                                <select id="apmPaymentTypeId" asp-items="@(new SelectList(ViewBag.PaymentTypes, "Id", "Value"))" class="form-control m-input m-input--square">
                                                    <option value="" selected>Chọn</option>
                                                </select>
                                            </div>
                                            <label class="col-lg-3 col-form-label">
                                                Loại tiền thanh toán
                                            </label>
                                            <div class="col-lg-3">
                                                <select id="apmCurrencyTypeId" asp-items="@(new SelectList(ViewBag.CurrencyTypes, "Id", "Value"))" class="form-control m-input m-input--square">
                                                    <option value="" selected>Chọn</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group m-form__group row">
                                            <label class="col-lg-3 col-form-label">
                                                Điều khoản thanh toán
                                            </label>
                                            <div class="col-lg-3">
                                                <select id="apmPaymentTermTypeId" asp-items="@(new SelectList(ViewBag.PaymentTermTypes, "Id", "Value"))" class="form-control m-input m-input--square">
                                                    <option value="" selected>Chọn</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group m-form__group row">
                                            <label class="col-lg-3 col-form-label">
                                                Hạn thanh toán/ Lãi suất
                                            </label>
                                            <div class="col-lg-3">
                                                <input id="apmPaymentLimit" class="form-control m-input" autocomplete="off" />
                                            </div>
                                            <div class="col-lg-3">
                                                <input id="apmInterestRate" class="form-control m-input" autocomplete="off" />
                                            </div>
                                        </div>
                                        <div class="form-group m-form__group row">
                                            <label class="col-lg-3 col-form-label">
                                                Hạn mức tín dụng
                                            </label>
                                            <div class="col-lg-3">
                                                <input id="apmPaymentCredit" class="form-control m-input" autocomplete="off" />
                                            </div>
                                            <label class="col-lg-3 col-form-label">
                                                Hạn mức hóa đơn
                                            </label>
                                            <div class="col-lg-3">
                                                <input id="apmInvoiceLimit" class="form-control m-input" autocomplete="off" />
                                            </div>
                                        </div>
                                        <div class="form-group m-form__group row">
                                            <label class="col-lg-3 col-form-label">
                                                Chiết khấu
                                            </label>
                                            <div class="col-lg-3">
                                                <select id="apmAgencyDiscountTypeId" asp-items="@(new SelectList(ViewBag.AgencyDiscountTypes, "Id", "Value"))" class="form-control m-input m-input--square">
                                                    <option value="" selected>Chọn</option>
                                                </select>
                                            </div>
                                            <div class="col-lg-3">
                                                <input id="apmDiscountAmount" class="form-control m-input" autocomplete="off" />
                                            </div>
                                        </div>
                                        <div class="form-group m-form__group row">
                                            <label class="col-lg-3 col-form-label">
                                                Ghi chú
                                            </label>
                                            <div class="col-lg-9">
                                                <textarea id="apmNote" class="form-control m-input m-input--air" rows="3"></textarea>
                                            </div>
                                        </div>
                                        <div class="form-group m-form__group row">
                                            <label class="col-lg-3 col-form-label">
                                                Thời gian bắt đầu
                                            </label>
                                            <div class="col-lg-4">
                                                <input id="apmStartDate" class="form-control m-input datepicker" autocomplete="off" />
                                            </div>
                                        </div>
                                        <div class="form-group m-form__group row">
                                            <label class="col-lg-3 col-form-label">
                                                Thời gian kết thúc
                                            </label>
                                            <div class="col-lg-4">
                                                <input id="apmEndDate" class="form-control m-input datepicker" autocomplete="off" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group m-form__group row">
                                    <div class="col-lg-12 text-right">
                                        <button type="button" class="btn btn-secondary btn-sm" id="add-apm" data-index="0">Cập nhật thông tin</button>
                                    </div>
                                </div>
                                <div class="form-group m-form__group row">
                                    <div class="col-lg-12">
                                        <table class="table table-striped- table-bordered table-hover table-checkable">
                                            <thead>
                                                <tr class="text-center">
                                                    <th>Thời gian bắt đầu</th>
                                                    <th>Thời gian kết thúc</th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <tbody id="apm-history"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="m-portlet m-portlet--tab">
                            <div class="m-portlet__head">
                                <div class="m-portlet__head-caption">
                                    <div class="m-portlet__head-title">
                                        <span class="m-portlet__head-icon m--hide">
                                            <i class="la la-gear"></i>
                                        </span>
                                        <h3 class="m-portlet__head-text">
                                            Giao hàng - Khuyến mãi
                                        </h3>
                                    </div>
                                </div>
                            </div>
                            <div class="m-portlet__body">
                                <div class="form-group m-form__group row">
                                    <div class="col-lg-12">
                                        <div class="form-group m-form__group row">
                                            <label class="col-lg-3 col-form-label">
                                                Hình thức lấy hàng
                                            </label>
                                            <div class="col-lg-4">
                                                <select id="adPickupTypeId" asp-items="@(new SelectList(ViewBag.PickupTypes, "Id", "Value"))" class="form-control m-input m-input--square">
                                                    <option value="" selected>Chọn</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group m-form__group row">
                                            <label class="col-lg-3 col-form-label">
                                                Hình thức khuyến mãi đại lý áp dụng cho khách
                                            </label>
                                            <div class="col-lg-4">
                                                <select id="adAgencyDiscountCustomerTypeId" asp-items="@(new SelectList(ViewBag.AgencyDiscountCustomerTypes, "Id", "Value"))" class="form-control m-input m-input--square">
                                                    <option value="" selected>Chọn</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group m-form__group row">
                                            <label class="col-lg-3 col-form-label">
                                                Ghi chú
                                            </label>
                                            <div class="col-lg-9">
                                                <textarea id="adNote" class="form-control m-input m-input--air" rows="3"></textarea>
                                            </div>
                                        </div>
                                        <div class="form-group m-form__group row">
                                            <label class="col-lg-3 col-form-label">
                                                Thời gian bắt đầu áp dụng
                                            </label>
                                            <div class="col-lg-4">
                                                <input id="adStartDate" class="form-control m-input datepicker" autocomplete="off" />
                                            </div>
                                        </div>
                                        <div class="form-group m-form__group row">
                                            <label class="col-lg-3 col-form-label">
                                                Thời gian kết thúc
                                            </label>
                                            <div class="col-lg-4">
                                                <input id="adEndDate" class="form-control m-input datepicker" autocomplete="off" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group m-form__group row">
                                    <div class="col-lg-12 text-right">
                                        <button type="button" class="btn btn-secondary btn-sm" id="add-ad" data-index="0">Cập nhật thông tin</button>
                                    </div>
                                </div>
                                <div class="form-group m-form__group row">
                                    <div class="col-lg-12">
                                        <table class="table table-striped- table-bordered table-hover table-checkable">
                                            <thead>
                                                <tr class="text-center">
                                                    <th>Thời gian bắt đầu</th>
                                                    <th>Thời gian kết thúc</th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <tbody id="ad-history"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="m-portlet m-portlet--tab">
                            <div class="m-portlet__head">
                                <div class="m-portlet__head-caption">
                                    <div class="m-portlet__head-title">
                                        <span class="m-portlet__head-icon m--hide">
                                            <i class="la la-gear"></i>
                                        </span>
                                        <h3 class="m-portlet__head-text">
                                            Nhân viên chăm sóc
                                        </h3>
                                    </div>
                                </div>
                            </div>
                            <div class="m-portlet__body">
                                <div class="form-group m-form__group row">
                                    <div class="col-lg-12 text-right">
                                        <button type="button" class="btn btn-secondary btn-sm" id="add-ac" data-index="0">Thêm nhân viên chăm sóc</button>
                                    </div>
                                </div>
                                <div class="form-group m-form__group row">
                                    <div class="col-lg-12">
                                        <table class="table table-striped- table-bordered table-hover table-checkable">
                                            <thead>
                                                <tr class="text-center">
                                                    <th>Ngày bắt đầu tiếp nhận</th>
                                                    <th>Ngày dừng tiếp nhận</th>
                                                    <th>Nhân viên chăm sóc</th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <tbody id="ac-history"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="m-portlet__foot m-portlet__foot--fit">
                        <div class="m-form__actions m-form__actions">
                            <div class="row">
                                <div class="col-lg-2"></div>
                                <div class="col-lg-6">
                                    <input type="submit" value="Submit" class="btn btn-primary" />
                                    <a asp-action="Index">Back to List</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="editAPMModal" tabindex="-1" role="dialog" aria-labelledby="editAPMModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Sửa thông tin thanh toán</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"></span></button>
            </div>
            <form asp-action="AddPayment" class="m-form m-form--label-align-right" data-ajax="true" data-ajax-method="POST" data-ajax-success="onSuccessEditAPM" data-ajax-failure="onFailureEditAPM">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <input type="hidden" id="eapmIndex" name="Index" />
                <input type="hidden" id="eapmId" name="Id" />
                <input type="hidden" id="eapmAgencyId" name="AgencyId" />
                <div class="modal-body">
                    <div class="form-group m-form__group row">
                        <div class="col-lg-12">
                            <div class="form-group m-form__group row">
                                <label class="col-lg-4 col-form-label">
                                    Hình thức thanh toán
                                </label>
                                <div class="col-lg-4">
                                    <select id="eapmPaymentTypeId" name="PaymentTypeId" asp-items="@(new SelectList(ViewBag.PaymentTypes, "Id", "Value"))" class="form-control m-input m-input--square">
                                        <option value="">Chọn</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group m-form__group row">
                                <label class="col-lg-4 col-form-label">
                                    Loại tiền thanh toán
                                </label>
                                <div class="col-lg-4">
                                    <select id="eapmCurrencyTypeId" name="CurrencyTypeId" asp-items="@(new SelectList(ViewBag.CurrencyTypes, "Id", "Value"))" class="form-control m-input m-input--square">
                                        <option value="">Chọn</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group m-form__group row">
                                <label class="col-lg-4 col-form-label">
                                    Điều khoản thanh toán
                                </label>
                                <div class="col-lg-4">
                                    <select id="eapmPaymentTermTypeId" name="PaymentTermTypeId" asp-items="@(new SelectList(ViewBag.PaymentTermTypes, "Id", "Value"))" class="form-control m-input m-input--square">
                                        <option value="">Chọn</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group m-form__group row">
                                <label class="col-lg-4 col-form-label">
                                    Hạn thanh toán/ Lãi suất
                                </label>
                                <div class="col-lg-4">
                                    <input id="eapmPaymentLimit" name="PaymentLimit" class="form-control m-input" autocomplete="off" />
                                </div>
                                <div class="col-lg-4">
                                    <input id="eapmInterestRate" name="InterestRate" class="form-control m-input" autocomplete="off" />
                                </div>
                            </div>
                            <div class="form-group m-form__group row">
                                <label class="col-lg-4 col-form-label">
                                    Hạn mức tín dụng
                                </label>
                                <div class="col-lg-4">
                                    <input id="eapmPaymentCredit" name="PaymentCredit" class="form-control m-input" autocomplete="off" />
                                </div>
                            </div>
                            <div class="form-group m-form__group row">
                                <label class="col-lg-4 col-form-label">
                                    Hạn mức hóa đơn
                                </label>
                                <div class="col-lg-4">
                                    <input id="eapmInvoiceLimit" name="InvoiceLimit" class="form-control m-input" autocomplete="off" />
                                </div>
                            </div>
                            <div class="form-group m-form__group row">
                                <label class="col-lg-4 col-form-label">
                                    Chiết khấu
                                </label>
                                <div class="col-lg-4">
                                    <select id="eapmAgencyDiscountTypeId" name="AgencyDiscountTypeId" asp-items="@(new SelectList(ViewBag.AgencyDiscountTypes, "Id", "Value"))" class="form-control m-input m-input--square">
                                        <option value="">Chọn</option>
                                    </select>
                                </div>
                                <div class="col-lg-4">
                                    <input id="eapmDiscountAmount" name="DiscountAmount" class="form-control m-input" autocomplete="off" />
                                </div>
                            </div>
                            <div class="form-group m-form__group row">
                                <label class="col-lg-4 col-form-label">
                                    Ghi chú
                                </label>
                                <div class="col-lg-8">
                                    <textarea id="eapmNote" name="Note" class="form-control m-input m-input--air" rows="3"></textarea>
                                </div>
                            </div>
                            <div class="form-group m-form__group row">
                                <label class="col-lg-4 col-form-label">
                                    Thời gian bắt đầu
                                </label>
                                <div class="col-lg-4">
                                    <input id="eapmStartDate" name="StartDate" class="form-control m-input datepicker" autocomplete="off" />
                                </div>
                            </div>
                            <div class="form-group m-form__group row">
                                <label class="col-lg-4 col-form-label">
                                    Thời gian kết thúc
                                </label>
                                <div class="col-lg-4">
                                    <input id="eapmEndDate" name="EndDate" class="form-control m-input datepicker" autocomplete="off" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-info">Lưu</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="editADModal" tabindex="-1" role="dialog" aria-labelledby="editADModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Sửa thông tin giao hàng</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"></span></button>
            </div>
            <form asp-action="AddDelivery" class="m-form m-form--label-align-right" data-ajax="true" data-ajax-method="POST" data-ajax-success="onSuccessEditAD" data-ajax-failure="onFailureEditAD">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <input type="hidden" id="eadIndex" name="Index" />
                <input type="hidden" id="eadId" name="Id" />
                <input type="hidden" id="eadAgencyId" name="AgencyId" />
                <div class="modal-body">
                    <div class="form-group m-form__group row">
                        <div class="col-lg-12">
                            <div class="form-group m-form__group row">
                                <label class="col-lg-5 col-form-label">
                                    Hình thức lấy hàng
                                </label>
                                <div class="col-lg-4">
                                    <select id="eadPickupTypeId" name="PickupTypeId" asp-items="@(new SelectList(ViewBag.PickupTypes, "Id", "Value"))" class="form-control m-input m-input--square">
                                        <option value="">Chọn</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group m-form__group row">
                                <label class="col-lg-5 col-form-label">
                                    Hình thức khuyến mãi đại lý áp dụng cho khách
                                </label>
                                <div class="col-lg-4">
                                    <select id="eadAgencyDiscountCustomerTypeId" name="AgencyDiscountCustomerTypeId" asp-items="@(new SelectList(ViewBag.AgencyDiscountCustomerTypes, "Id", "Value"))" class="form-control m-input m-input--square">
                                        <option value="">Chọn</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group m-form__group row">
                                <label class="col-lg-5 col-form-label">
                                    Ghi chú
                                </label>
                                <div class="col-lg-7">
                                    <textarea id="eadNote" name="Note" class="form-control m-input m-input--air" rows="3"></textarea>
                                </div>
                            </div>
                            <div class="form-group m-form__group row">
                                <label class="col-lg-5 col-form-label">
                                    Thời gian bắt đầu áp dụng
                                </label>
                                <div class="col-lg-4">
                                    <input id="eadStartDate" name="StartDate" class="form-control m-input datepicker" autocomplete="off" />
                                </div>
                            </div>
                            <div class="form-group m-form__group row">
                                <label class="col-lg-5 col-form-label">
                                    Thời gian kết thúc
                                </label>
                                <div class="col-lg-4">
                                    <input id="eadEndDate" name="EndDate" class="form-control m-input datepicker" autocomplete="off" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-info">Lưu</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="addACModal" tabindex="-1" role="dialog" aria-labelledby="addACModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Thêm nhân viên chăm sóc</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row mb-4">
                    <div class="col-md-3">
                        <input class="form-control m-input" id="srchPersonName" placeholder="Tên" />
                    </div>
                    <div class="col-md-3">
                        <input class="form-control m-input" id="srchPersonPhone" placeholder="Điện thoại" />
                    </div>
                    <div class="col-md-3">
                        <button type="button" class="btn btn-info btn-sm btnSrchPerson" data-persontype="@PersonType.Employee">Tìm nhân viên</button>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <table class="table table-striped table-bordered table-hover" id="srchemployee-table">
                            <thead>
                                <tr class="text-center">
                                    <th></th>
                                    <th>Họ tên</th>
                                    <th>Chức vụ</th>
                                    <th>Số điện thoại</th>
                                    <th>Email</th>
                                </tr>
                            </thead>
                            <tbody class="srchemployee-container"></tbody>
                        </table>
                    </div>
                </div>
                <input type="hidden" id="acIndex" />
                <div class="form-group m-form__group row">
                    <label class="col-lg-4 col-form-label">
                        Ngày bắt đầu tiếp nhận
                    </label>
                    <div class="col-lg-4">
                        <input id="acStartDate" class="form-control m-input datepicker" autocomplete="off" />
                    </div>
                </div>
                <div class="form-group m-form__group row">
                    <label class="col-lg-4 col-form-label">
                        Ngày dừng tiếp nhận
                    </label>
                    <div class="col-lg-4">
                        <input id="acEndDate" class="form-control m-input datepicker" autocomplete="off" />
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <input class="btn btn-info btn-sm" id="btnAddAC" value="Lưu" />
                <input class="btn btn-info btn-sm" data-dismiss="modal" value="Đóng" />
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="editACModal" tabindex="-1" role="dialog" aria-labelledby="editACModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Sửa nhân viên chăm sóc</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"></span></button>
            </div>
            <form asp-action="AddAgencyCare" class="m-form m-form--label-align-right" data-ajax="true" data-ajax-method="POST" data-ajax-success="onSuccessEditAC" data-ajax-failure="onFailureEditAC">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <input type="hidden" id="eacIndex" name="Index" />
                <input type="hidden" id="eacId" name="Id" />
                <input type="hidden" id="eacAgencyId" name="AgencyId" />
                <input type="hidden" id="eacEmployeeId" name="EmployeeId" />
                <div class="modal-body">
                    <div class="form-group m-form__group row">
                        <label class="col-lg-5 col-form-label">
                            Nhân viên chăm sóc
                        </label>
                        <div class="col-lg-7">
                            <input id="eacEmployeeName" class="form-control m-input" readonly />
                        </div>
                    </div>
                    <div class="form-group m-form__group row">
                        <label class="col-lg-5 col-form-label">
                            Ngày bắt đầu tiếp nhận
                        </label>
                        <div class="col-lg-7">
                            <input id="eacStartDate" name="StartDate" class="form-control m-input datepicker" autocomplete="off" />
                        </div>
                    </div>
                    <div class="form-group m-form__group row">
                        <label class="col-lg-5 col-form-label">
                            Ngày dừng tiếp nhận
                        </label>
                        <div class="col-lg-7">
                            <input id="eacEndDate" name="EndDate" class="form-control m-input datepicker" autocomplete="off" />
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-info">Lưu</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="addARepresentativeModal" tabindex="-1" role="dialog" aria-labelledby="addARepresentativeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Thêm người đại diện</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="arIndex" />
                <div class="row mb-4">
                    <div class="col-md-3">
                        <input class="form-control m-input" id="srchPersonName" placeholder="Tên" />
                    </div>
                    <div class="col-md-3">
                        <input class="form-control m-input" id="srchPersonPhone" placeholder="Điện thoại" />
                    </div>
                    <div class="col-md-3">
                        <button type="button" class="btn btn-info btn-sm btnSrchPerson" data-persontype="@PersonType.Representative">Tìm người đại diện</button>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <table class="table table-striped table-bordered table-hover" id="srchemployee-table">
                            <thead>
                                <tr class="text-center">
                                    <th></th>
                                    <th>Họ tên</th>
                                    <th>Chức vụ</th>
                                    <th>Số điện thoại</th>
                                    <th>Email</th>
                                </tr>
                            </thead>
                            <tbody class="srchemployee-container"></tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <input class="btn btn-info btn-sm" id="btnAddARepresentative" value="Lưu" />
                <input class="btn btn-info btn-sm" data-dismiss="modal" value="Đóng" />
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script src="~/js/person_agency.js?t=@(DateTimeOffset.UtcNow.ToUnixTimeSeconds())"></script>
    <script>
        $(document).ready(function () {
            SetActiveMenu('agencyMenu');
        });
    </script>
}
